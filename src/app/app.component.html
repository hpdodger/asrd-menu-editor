<div class="container">

	<h2>ASRD Radial menu editor</h2>
	<h4>by typical russian</h4>

	<ul class="nav nav-tabs">
		<li class="nav-item">
			<a class="nav-link" [ngClass]="activeTabIndex === 2 ? 'active' : ''"
				(click)="activeTabIndex = 2">Information</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" [ngClass]="activeTabIndex === 0 ? 'active' : ''" (click)="activeTabIndex = 0">Editor</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" [ngClass]="activeTabIndex === 1 ? 'active' : ''" (click)="activeTabIndex = 1">Result</a>
		</li>
	</ul>

	<div *ngIf="activeTabIndex === 0" class="content">

		<div class="card" style="margin-bottom: 10px;">
			<div class="card-body" style="padding: 10px;">
				<button (click)="addMenu()" class="btn btn-sm btn-outline-secondary">Add menu</button>
				<button class="btn btn-sm btn-outline-secondary" disabled>TODO: Load menu from JSON file</button>
			</div>
		</div>

		<div class="card" *ngIf="menuRootNode && menuRootNode.items.length > 0">
			<div class="card-body" style="padding: 10px;">
				<details name="menus" *ngFor="let menu of menuRootNode.items; let i = index"
					[open]="i === menuRootNode.items.length - 1">
					<summary>Menu label: <b>{{menu.label}}</b></summary>
					<app-menu [model]="menu" [index]="i" (onRemoveMenu)="removeMenu($event)"></app-menu>
				</details>
			</div>
		</div>

	</div>

	<div *ngIf="activeTabIndex === 1" class="content">

		<table class="table table-bordered">
			<thead>
				<th>RadialMenu.txt</th>
				<th>JSON</th>
			</thead>
			<tbody>
				<tr>
					<td><a class="btn btn-sm btn-outline-secondary downloadTextBtn"
							[ngClass]="menuRootNode ? '' : 'disabled'" (click)="saveToFile('text')">save to file</a>
					</td>
					<td><a class="btn btn-sm btn-outline-secondary downloadJsonBtn"
							[ngClass]="menuRootNode ? '' : 'disabled'" (click)="saveToFile('json')">save to file</a>
					</td>
				</tr>
				<tr>
					<td width="50%" *ngIf="menuRootNode; else noMenu">
						<textarea style="width: 100%; height: 100%;" rows="20" [value]="menuRootNode.serializeToASRD()"
							readonly>
						</textarea>
					</td>
					<td>
						<textarea *ngIf="menuRootNode; else noMenu" style="width: 100%; height: 100%;" rows="20"
							[value]="menuRootNode.serializeToJSON()" readonly>
						</textarea>
					</td>
				</tr>
		</table>

	</div>

	<div *ngIf="activeTabIndex === 2" class="content">

		<ul>
			<li>TODO: TOC</li>
		</ul>

		<h3>General information</h3>

		<h5>Created for educational and entertainment purposes. There is a list of improvements to be made. Any help and
			adequate
			criticism is welcome.</h5>

		<h3>Preview</h3>

		<img src="assets/screenshot.png" alt="preview" width="560" />
		<br><br>
		<iframe width="560" height="315" [src]="safeYoutubeUrl" frameborder="0" allowfullscreen></iframe>

		<p>
			RadialMenu is located at \scripts\radialmenu.txt and is a txt file containing a description of the available
			menus
			and their elements.
		<p>
			Each menu contains a label that specifies the identifier of this menu and a set of elements.

		<p>
			Each menu element contains a label, text, command.
		<p>
			label specifies the identifier of the menu item (there can be up to 9 - "Center" | "North" | "NorthEast" |
			"East" |
			"SouthEast" | "South" | "SouthWest" | "West" | "NorthWest")
		<p>
			text specifies the presentation of the menu item on the screen.
		<p>
			command specifies the action that will be performed when clicking on the menu item.

		<h3>Working with the editor</h3>
		<p>
			The editor allows you to create new menus, edit existing ones, delete and add items, and create nested
			menus.
		<p>
			Nested menus can be useful for quick access to different commands and help you avoid remembering multiple
			binds.
		<p>
			The enabled flag allows you to disable the menu item on the screen if necessary. You cannot disable Center
			item.
		<p>

			Below is an example of a truncated three-level menu with transitions in depth and back:
		<p>

			<textarea style="width: 100%;" rows="20">
			"RadialMenu"
			{
				"Default"
				{
					"NorthWest"
					{
						"command"	"radialmenu Submenu1"
						"text"		"Submenu1"
					}
					"Center"
					{
						"command"	""
						"text"		"^_^"
					}
				}
				"Submenu1"
				{
					"NorthEast"
					{
						"command"	"radialmenu Submenu2"
						"text"		"Submenu2"
					}
					"Center"
					{
						"command"	"radialmenu Default"
						"text"		"back"
					}
					"SouthWest"
					{
						"command"	"cl_emote 6"
						"text"		"cl_emote 6"
					}
				}
				"Submenu2"
				{
					"Center"
					{
						"command"	"radialmenu Submenu1"
						"text"		"back"
					}
					"SouthWest"
					{
						"command"	"cl_emote 5"
						"text"		"cl_emote 5"
					}
				}
			}
		</textarea>

			The Result tab allows you to view the final version in Txt and JSON formats, as well as download it.

		<h3>Using in the game</h3>

		<p>
			Make a bind to any button to open the default menu, for example bind o "radialmenu Default".
			<br>
			The difference from the +mouse_menu command is that radialmenu opens the menu when pressed, and +mouse_menu
			- when
			pressed and held.
		<p>
			You can quickly close the menu at any time by pressing the default menu button (Z).
		<p>
			There are some peculiarities when moving through multi-level menus.
			<br>
			For example: when selecting a menu item that allows you to go to a submenu,
			you need to click on it (at this point the submenu will open) and continue to hold the mouse button.
			Now if you need to select the final command, you need to move the cursor to it and release the left mouse
			button,
			regardless of whether it is a submenu, no. Moving back from a submenu works on the same principle.





	</div>


</div>
<router-outlet></router-outlet>

<ng-template #noMenu>
	<div> no model </div>
</ng-template>